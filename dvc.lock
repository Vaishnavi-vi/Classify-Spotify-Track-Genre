schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data_ingestion.py
    deps:
    - path: src/data_ingestion.py
      hash: md5
      md5: 98d20475856b1b1de77ce14cf86325bc
      size: 5445
    params:
      params.yaml:
        data_ingestion.test_size: 0.2
        mongodb.COLLECTION_NAME: Track_Genre_Data
        mongodb.CONNECTION_URL: 
          mongodb+srv://vaishnavibarolia_db_user:acKi2dkVl8ogy7yh@cluster0.3xoibcj.mongodb.net/?appName=Cluster0
        mongodb.DB_NAME: Track_Genre
    outs:
    - path: data/raw
      hash: md5
      md5: 1cf2fdfe466a45980e98f2ee27590654.dir
      size: 10172483
      nfiles: 2
  feature_engineering:
    cmd: python src/feature_engineering.py
    deps:
    - path: data/raw
      hash: md5
      md5: 1cf2fdfe466a45980e98f2ee27590654.dir
      size: 10172483
      nfiles: 2
    - path: src/feature_engineering.py
      hash: md5
      md5: 566c2274785a5e9287d74e5808a37ec2
      size: 10812
    outs:
    - path: artifacts/Optimal_k.png
      hash: md5
      md5: 83a4daee242acf774aa25dd0521a2840
      size: 31668
    - path: artifacts/cluster_metrics.json
      hash: md5
      md5: ed1391262026dda82d93aa8491aacf05
      size: 112
    - path: artifacts/cluster_plots.png
      hash: md5
      md5: 6af03a2959ab1b558b759abf054f19ff
      size: 44829
    - path: data/feature_engineering
      hash: md5
      md5: f6d79518a8829602a378712cd5ce9f46.dir
      size: 9480483
      nfiles: 2
  feature_selection:
    cmd: python src/feature_selection.py
    deps:
    - path: data/feature_engineering
      hash: md5
      md5: f6d79518a8829602a378712cd5ce9f46.dir
      size: 9480483
      nfiles: 2
    - path: src/feature_selection.py
      hash: md5
      md5: 5a4a0f30d731ba9ff375ad78fdd273c1
      size: 6710
    outs:
    - path: artifacts/mi_feature_importance.png
      hash: md5
      md5: fbeba74707e94827dffc158c1b90eba7
      size: 26257
    - path: artifacts/power_transformer.pkl
      hash: md5
      md5: afb2797fa51ded52d5e84b9452bf9406
      size: 996
    - path: artifacts/scaler.pkl
      hash: md5
      md5: 949c81ee57d528dedd9124231e919768
      size: 1012
    - path: data/preprocess
      hash: md5
      md5: 3c41affc0edd2ac3872c316c22f12c68.dir
      size: 37492410
      nfiles: 4
  model_training:
    cmd: python src/model_training.py
    deps:
    - path: data/preprocess/x_train_processed.csv
      hash: md5
      md5: ad405b1a098093fbd3e200897d4ce666
      size: 31241017
    - path: data/preprocess/y_train_processed.csv
      hash: md5
      md5: 1fc557a3f186f7cd64d0718a8955e1c5
      size: 367312
    params:
      params.yaml:
        model_training.model_type: xgboost
        model_training.params.colsample_bytree: 0.8
        model_training.params.learning_rate: 0.05
        model_training.params.max_depth: 7
        model_training.params.n_estimators: 300
        model_training.params.subsample: 0.8
    outs:
    - path: artifacts/xgb_model.pkl
      hash: md5
      md5: 475088057255eb79efc40f2b2b03564d
      size: 6097024
  model_evaluation:
    cmd: python src/model_evaluation.py
    deps:
    - path: data/preprocess/x_test_processed.csv
      hash: md5
      md5: 64ffcc8e8da0ef3a0da43c8a8f631d05
      size: 5815668
    - path: data/preprocess/y_test_processed.csv
      hash: md5
      md5: f1507ca46f758b41533f63efcf2fa01c
      size: 68413
    params:
      params.yaml:
        model_training.model_type: xgboost
        model_training.params.colsample_bytree: 0.8
        model_training.params.gamma: 0.5
        model_training.params.learning_rate: 0.05
        model_training.params.max_depth: 7
        model_training.params.n_estimators: 300
        model_training.params.random_state: 42
        model_training.params.reg_alpha: 1
        model_training.params.reg_lambda: 2
        model_training.params.subsample: 0.8
    outs:
    - path: artifacts/confusion_matrix.png
      hash: md5
      md5: 185c476a44cdb22c0da273e5197a80eb
      size: 22658
    - path: artifacts/metrics.json
      hash: md5
      md5: 29c3436a6d5f73d09493a6c17874b1dc
      size: 198
