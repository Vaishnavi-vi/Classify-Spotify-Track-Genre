schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/data_ingestion.py
    deps:
    - path: src/data_ingestion.py
      hash: md5
      md5: d371b60f35407b09e3a013a7a84f4449
      size: 5432
    params:
      params.yaml:
        data_ingestion.test_size: 0.2
        mongodb.COLLECTION_NAME: Track_Genre_Data
        mongodb.CONNECTION_URL: 
          mongodb+srv://vaishnavibarolia_db_user:acKi2dkVl8ogy7yh@cluster0.3xoibcj.mongodb.net/?appName=Cluster0
        mongodb.DB_NAME: Track_Genre
    outs:
    - path: data/raw
      hash: md5
      md5: 1cf2fdfe466a45980e98f2ee27590654.dir
      size: 10172483
      nfiles: 2
  feature_engineering:
    cmd: python src/feature_engineering.py
    deps:
    - path: data/raw
      hash: md5
      md5: 1cf2fdfe466a45980e98f2ee27590654.dir
      size: 10172483
      nfiles: 2
    - path: src/feature_engineering.py
      hash: md5
      md5: 6aead9d955276a28c2123cdbe2fcaf48
      size: 10814
    outs:
    - path: artifacts/Optimal_k.png
      hash: md5
      md5: 2c1f731a8d664f6ef7d08d10092e5cb1
      size: 33286
    - path: artifacts/cluster_metrics.json
      hash: md5
      md5: ed1391262026dda82d93aa8491aacf05
      size: 112
    - path: artifacts/cluster_plots.png
      hash: md5
      md5: b502a6eaffb1ffdecdfb6493acd38d5c
      size: 44748
    - path: data/feature_engineering
      hash: md5
      md5: f6d79518a8829602a378712cd5ce9f46.dir
      size: 9480483
      nfiles: 2
  feature_selection:
    cmd: python src/feature_selection.py
    deps:
    - path: data/feature_engineering
      hash: md5
      md5: f6d79518a8829602a378712cd5ce9f46.dir
      size: 9480483
      nfiles: 2
    - path: src/feature_selection.py
      hash: md5
      md5: 0933e8a12a5dd0c4ec05c414e224a238
      size: 8278
    outs:
    - path: artifacts/mi_feature_importance.png
      hash: md5
      md5: 3506ba4059586946ef6f95b465fc0f73
      size: 26706
    - path: artifacts/preprocess.pkl
      hash: md5
      md5: 3d04a634fe3655e5bb09022445e22a8e
      size: 500
    - path: artifacts/scaler.pkl
      hash: md5
      md5: 20819d35124baa4548b30f6722e533d0
      size: 129
    - path: data/preprocess
      hash: md5
      md5: bd68ae566e7bfca851a7c9cc65eeebc3.dir
      size: 40613023
      nfiles: 4
  model_training:
    cmd: python src/model_training.py
    deps:
    - path: data/preprocess/x_train_processed.csv
      hash: md5
      md5: e828385f0de2a7a24b01405b1f148528
      size: 33627158
    - path: data/preprocess/y_train_processed.csv
      hash: md5
      md5: 15fce65032e0b6680b7474d9a9ec78f2
      size: 612178
    params:
      params.yaml:
        model_training.model_type: xgboost
        model_training.params.colsample_bytree: 0.8
        model_training.params.learning_rate: 0.1
        model_training.params.max_depth: 5
        model_training.params.n_estimators: 100
        model_training.params.subsample: 0.8
    outs:
    - path: artifacts/xgb_model.pkl
      hash: md5
      md5: cc04e64877869281be0a73355912d00d
      size: 788667
  model_evaluation:
    cmd: python src/model_evaluation.py
    deps:
    - path: data/preprocess/x_test_processed.csv
      hash: md5
      md5: c939988f71a4f5c262b33640e2419f12
      size: 6259674
    - path: data/preprocess/y_test_processed.csv
      hash: md5
      md5: 786aac8dfc7ccbd90a53840972f006a1
      size: 114013
    params:
      params.yaml:
        model_training.model_type: xgboost
        model_training.params.colsample_bytree: 0.8
        model_training.params.learning_rate: 0.1
        model_training.params.max_depth: 5
        model_training.params.n_estimators: 100
        model_training.params.subsample: 0.8
    outs:
    - path: artifacts/confusion_matrix.png
      hash: md5
      md5: 99e3b358104de27402d515589f52cfd4
      size: 22200
    - path: artifacts/metrics.json
      hash: md5
      md5: a38053baeab736c970b01bfb515aeb39
      size: 196
